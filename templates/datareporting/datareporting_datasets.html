{% extends 'nova_core/base.html' %}
{% load static %}

{% block content %}
{% include 'datareporting/datareporting_navbar.html' %}

<!--Main Title:-->
<h1 class="display-5 text-center pt-4 mb-2 ">Datasets</h1>

<div style="width: 50%; margin: 0 auto;">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} my-3 text-center pt-3" style="font-size: 1rem; color: #444444; border-radius: 10px; padding: 10px;">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
</div>

<div class="container-fluid mb-2">
    <div class="row justify-content-center" >
        <div class="text-center col-md-12">
            <a href="{% url 'new_dataset' %}" class="btn btn-primary ml-3" style="vertical-align: middle; width: 150px;">Add New Dataset</a>
        </div>
    </div>
</div>

<div class="container-fluid mt-2">
    <div class="row justify-content-center" >
        <div class="text-center col-md-12">
                <a href="{% url 'dataset_processing' %}" class="btn btn-warning ml-3" style="vertical-align: middle; width: 150px;">Processing</a>
        </div>
    </div>
</div>

<!--Search Bar:-->
<div class="search-container text-center pt-3">
    <input type="text" id="searchInput" placeholder="Search Datasets..." class="form-control w-25 mx-auto">
</div>


{% include 'datareporting/partials/datareporting_dataset_cards.html' %}

<!--Script for filtering:-->
<script>
    document.addEventListener("DOMContentLoaded", function() {

        var searchInput = document.getElementById("searchInput");
    
        searchInput.addEventListener("keyup", function() {
            var searchQuery = searchInput.value.toLowerCase();
    
            var cards = document.querySelectorAll(".card");
    
            cards.forEach(function(card) {
                var datasetName = card.querySelector(".card-title").textContent.toLowerCase();
    
                if (datasetName.includes(searchQuery)) {
                    card.style.display = "";
                } else {
                    card.style.display = "none";
                }
            });
        });
    });
</script>

<!--CSS malarkey (get rid of this):-->
<style>
  .info-and-title {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    }

    .image-hover {
    position: relative;
    display: inline-block;
}

.hover-box {
    display: none;
    position: absolute;
    z-index: 10;
    background-color: white;
    border: 1px solid #ddd;
    padding: 10px;
    width: 200px;
    top: 25px;
    left: 0;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-radius: 4px;
}

.image-hover:hover .hover-box {
    display: block;
}

 </style>
    
{% endblock %}